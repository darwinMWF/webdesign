<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>class and arry methods</title>
    <style>
      table,
      tr,
      th,
      td {
        border: 2px solid;
        border-collapse: collapse;
      }

      h1 {
        text-align: center;
      }
      table {
        margin: 20px auto;
      }

      label,
      input {
        display: block;
      }

      .addbookformcls {
        display: flex;
        justify-content: center;
      }

      #addbookformcls form {
        border: 2px solid;
      }

      .btns {
        display: flex;
        justify-content: center;
      }
    </style>
  </head>
  <body>
    <h1>Library management</h1>
    <table id="bookTable">
      <thead>
        <tr>
          <th>BOOK ID</th>
          <th>BOOK TITLE</th>
          <th>AUTHER</th>
          <th>AVAILABLE</th>
          <th>PRICE</th>
          <th>COPY</th>
        </tr>
      </thead>
      <tbody id="tdata"></tbody>
    </table>

    <div id="addbookform" class="addbookformcls">
      <form action="" id="editform">
        <label for="booktitle">Book title</label>
        <input
          type="text"
          name=""
          id="booktitle"
          placeholder="half-girlfriend"
        />
        <label for="bookAuthor">Author</label>
        <input type="text" id="bookAuthor" placeholder="chetan bhagat" />
        <label for="availableBook">Available</label>
        <input type="text" id="availableBook" placeholder="true" />
        <label for="pricebook">Price</label>
        <input type="text" id="pricebook" placeholder="4$" />
        <label for="copybook">Copy</label>
        <input type="text" id="copybook" placeholder="15" />
        <button>submit</button>
      </form>
    </div>
    <div id="editbookform" class="addbookformcls">
      <form action="">
        <label for="booktitle">Book title</label>
        <input
          type="text"
          name=""
          id="booktitle"
          placeholder="half-girlfriend"
          value=""
        />
        <label for="bookAuthor">Author</label>
        <input
          type="text"
          id="bookAuthor"
          placeholder="chetan bhagat"
          value=""
        />
        <label for="availableBook">Available</label>
        <input type="text" id="availableBook" placeholder="true" value="" />
        <label for="pricebook">Price</label>
        <input type="text" id="pricebook" placeholder="4$" value="" />
        <label for="copybook">Copy</label>
        <input type="text" id="copybook" placeholder="15" value="" />
        <button>submit</button>
      </form>
    </div>

    <div class="btns">
      <button id="addBtn" onclick="Addbook()">Add</button>
      <button id="deleteBtn">delete</button>
      <button id="editBtn" onclick="editBook()">edit</button>
    </div>

    <script>
      const tableData = document.getElementById("tdata");
      const AddBookRecord = document.getElementById("addBtn");
      const deleteBookRecord = document.getElementById("deleteBtn");
      const editBookRecord = document.getElementById("editBtn");
      const Booktable = document.getElementById("bookTable");
      const formaddbook = document.getElementById("addbookform");
      const formeditbook = document.getElementById("editbookform");
      const editform = document.getElementById("editform");

      formaddbook.style.display = "none";
      formeditbook.style.display = "none";
      Booktable.style.display = "block";
      let id = 11;
      let bookdata = [
        {
          id: 1,
          title: "harry potter",
          Auther: "j.k rollins",
          Available: true,
          price: "11$",
          totalCopy: 15,
        },
        {
          id: 2,
          title: "harry potter",
          Auther: "j.k rollins",
          Available: true,
          price: "20$",
          totalCopy: 16,
        },
        {
          id: 3,
          title: "harry potter",
          Auther: "j.k rollins",
          Available: true,
          price: "23$",
          totalCopy: 10,
        },
        {
          id: 4,
          title: "harry potter",
          Auther: "j.k rollins",
          Available: true,
          price: "30$",
          totalCopy: 15,
        },
        {
          id: 5,
          title: "harry potter",
          Auther: "j.k rollins",
          Available: true,
          price: "150$",
          totalCopy: 10,
        },
        {
          id: 6,
          title: "harry potter",
          Auther: "j.k rollins",
          Available: true,
          price: "100$",
          totalCopy: 14,
        },
        {
          id: 7,
          title: "harry potter",
          Auther: "j.k rollins",
          Available: false,
          price: "200$",
          totalCopy: 0,
        },
        {
          id: 8,
          title: "harry potter",
          Auther: "j.k rollins",
          Available: false,
          price: "20$",
          totalCopy: 0,
        },
        {
          id: 9,
          title: "harry potter",
          Auther: "j.k rollins",
          Available: true,
          price: "200$",
          totalCopy: 8,
        },
        {
          id: 10,
          title: "harry potter",
          Auther: "j.k rollins",
          Available: false,
          price: "200$",
          totalCopy: 0,
        },
      ];

      class Books {
        id = 11;
        constructor(title, Auther, Available, price, totalCopy) {
          this.id = id++;
          this.title = title;
          this.Auther = Auther;
          this.Available = Available;
          this.price = price;
          this.totalCopy = totalCopy;
        }
        addbook() {
          bookdata.push(this);
          tableData.innerHTML = ""
          bookdata.forEach((x) => {
            tableData.innerHTML += `<tr>
            <td>${x.id}</td>
            <td>${x.title}</td>
            <td>${x.Auther}</td>
            <td>${x.Available}</td>
            <td>${x.price}</td>
            <td>${x.totalCopy}</td>
         </tr>`;
          });
        }

        edit(id, title, Auther, Available, price, totalCopy) {
          const obj = bookdata.find((x) => x.id === id);
          this.id = id;
          this.title = title;
          this.Auther = Auther;
          this.Available = Available;
          this.price = price;
          this.totalCopy = totalCopy;
        }

        deleteData(id) {
          const newArry = bookdata.filter((x) => x.id !== id);
          bookdata = newArry;
          console.log(bookdata);
        }
      }

      function Addbook() {
        Booktable.style.display = "none";
        formaddbook.style.display = "flex";
        AddBookRecord.style.display = "none";
      }

      editform.addEventListener("submit", (e) => {
        
        e.preventDefault();
        const title = e.target[0].value;
        const author = e.target[1].value;
        const Available = e.target[2].value;
        const price = e.target[3].value;
        const totalCopy = e.target[4].value;
        const obj = new Books(title, author, Available, price, totalCopy);

        bookdata = obj.addbook();
        formaddbook.style.display = "none";
        Booktable.style.display = "block";
        AddBookRecord.style.display = "block";
        editform.reset()

      });

      function editBook() {
        Booktable.style.display = "none";
        formaddbook.style.display = "none";
        AddBookRecord.style.display = "block";
        editBookRecord.style.display = "none";
        formeditbook.style.display = "flex";
      }

      console.log(bookdata.length);

      bookdata.forEach((x) => {
        tableData.innerHTML += `<tr>
            <td>${x.id}</td>
            <td>${x.title}</td>
            <td>${x.Auther}</td>
            <td>${x.Available}</td>
            <td>${x.price}</td>
            <td>${x.totalCopy}</td>
         </tr>`;
      });
      //   obj.edit(11, "tejs", "tejs", true, "455", 56);
      //   obj.deleteData(11)
    </script>
  </body>
</html>
